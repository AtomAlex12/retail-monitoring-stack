services:
  store-registry:
    build:
      context: .
      dockerfile: Dockerfile.store-registry
    container_name: store-registry-exporter
    restart: unless-stopped
    ports:
      - "9095:9095"
      - "8080:8080"
    environment:
      - PROMETHEUS_URL=http://192.168.141.49:9090
      - REGISTRY_FILE=/data/store-registry-state.json
      - WEB_DIR=/web
    volumes:
      - store-registry-data:/data
      # Папка web — редактируйте HTML/CSS/JS без пересборки контейнера
      - ./web:/web:ro
      # Для миграции из stores-registry.json — раскомментируйте:
      # - ./stores-registry.json:/app/stores-registry.json:ro

volumes:
  store-registry-data:
